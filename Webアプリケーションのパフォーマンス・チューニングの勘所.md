## 計測の順番と勘所

- 計測するために必要な情報
  - アクセスログがどこにあるのか
  	- ログはあとから取ることができないので、計測する前にログを取ること
  	- ログはjsonにしておくのがおすすめ
  	- 人間が読みやすいように
  - CPUやメモリのメトリック
    - 毎日計測する
  - スロークエリログのログ
    - デフォルトでは出ないので設定が必要
    - 使いやすいように準備する

- ログ検索のアプローチ
  - ERRORやCRITICALのログを検索しalertを出す
  - AWSの場合はCloudwatch Logs Insightsが楽

- 計測したい理由を整理する
  - どこから計測するか
  	最初にOSのメトリックを見るのが全体を知れて良い

## DBに負荷がかかる例
- デッドロックがあればリトライするのがベスト

## 仕様から変える
- Pagerの件数などは不要な場合が多いから消す

## テーブル設計が悪い
- 直すしかない

## キャッシュは麻薬
- 使わなくて済むなら使わない！！

- 壊れたときに原因が分かりづらくなりがち

- 使うと圧倒的にパフォーマンスが上がるが副作用がいくつかあるからそれを踏まないようにする

- クライアントに近いところで使うのがおすすめ、サーバー側では使わない

